# Gemini Helper 会话导出功能需求文档

## 1. 原始需求 (Baseline Requirements)

### 1.1 新增“会话”标签页

-   在现有的面板（Prompts, Settings, Outline）之外，新增一个名为 **"会话" (Conversations)** 的 Tab 页。
-   该页面用于展示所有用户与 AI 的历史会话列表。

### 1.2 会话列表功能

-   **数据来源**：从左侧边栏（Sidebar）自动获取所有会话。
-   **列表展示**：清晰展示会话标题。
-   **交互动作**：
    -   **点击跳转**：单击列表项，页面自动跳转到对应的会话 URL。
    -   **选择操作**：支持对会话进行 **多选**、**全选**、**反选**。

### 1.3 导出功能

-   对选中的会话进行导出。
-   **支持格式**：
    -   `JSON`: 结构化数据，包含元数据。
    -   `Markdown`: 适合阅读和笔记软件的内容格式。
    -   `TXT`: 纯文本格式。
-   **导出内容策略**：
    -   **当前会话**：导出完整的对话历史（用户提问 + AI 回答）。
    -   **后台会话**：由于 CSR 限制，默认仅导出元数据（标题 + URL），除非采用进阶方案。

### 1.4 非功能性需求

-   **UI 美观**：界面需与现有风格保持一致，采用现代化设计。
-   **交互友好**：操作流畅不可卡顿。
-   **代码安全性**：**绝对不能**破坏现有功能（现有功能包括：提示词管理、大纲、自动宽屏、模型锁定等）。
-   **多站点适配**：必须兼容 Gemini (Personal), Gemini Advanced/Business, Genspark。

---

## 2. 进阶建议 (Advanced Suggestions) - 待定/后续规划

为了打造极致体验，建议引入以下功能：

### 2.1 🤖 “自动巡航”深度导出 (Batch Travel & Export)

-   **痛点解决**：彻底解决后台会话无法获取内容的限制。
-   **机制**：
    1.  用户勾选多个会话并点击“深度导出”。
    2.  脚本自动按顺序跳转到每个会话 URL。
    3.  等待页面加载 -> 抓取内容 -> 保存 -> 跳转下一个。
    4.  全程自动化，并在完成后通知用户。

### 2.2 🔍 交互体验提升 (UX Enhancements)

-   **实时搜索**：在列表顶部添加搜索框，输入关键词即时过滤会话列表。
-   **Shift 范围选择**：支持按住 Shift 键进行连续的范围多选。
-   **时间轴分组**：将会话按“今天”、“昨天”、“过去 7 天”进行视觉分组展示。

### 2.3 📄 格式增强 (Format Enhancements)

-   **Markdown Frontmatter**：导出的 MD 文件头部包含 YAML 元数据（原链接、模型、时间），方便 Obsidian/Notion 用户。
-   **HTML 高保真导出**：包含基础 CSS 样式，离线查看时保留气泡样式和代码高亮。

### 2.4 🎨 视觉增强 (Visual Improvements)

-   **导出仪表盘**：底部浮动栏实时显示“已选中 X 个会话”。
-   **图标适配**：列表项显示模型图标或站点图标。

---

## 3. 开发计划备忘

> 待用户确认具体的进阶功能范围后启动开发。目前优先保证 **1. 原始需求** 的稳健实现。
